#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var Selector,Extension,StringConstant,CommandlineArgument,CommandlineArgumentShort,MimeType,path=require("path"),getFileText=_interopDefault(require("vamtiger-get-file-text")),createFile=_interopDefault(require("vamtiger-create-file")),Args=_interopDefault(require("vamtiger-argv/build/main"));function __awaiter(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((i=i.apply(e,t)).next())})}!function(e){e.jsonScript='script[type="application/json"]'}(Selector||(Selector={})),function(e){e.json="json",e.js="js"}(Extension||(Extension={})),function(e){e.nothing="",e.period=".",e.space=" ",e.backTick="`"}(StringConstant||(StringConstant={})),function(e){e.file="file"}(CommandlineArgument||(CommandlineArgument={})),function(e){e.file="f"}(CommandlineArgumentShort||(CommandlineArgumentShort={})),function(e){e.json="application/json"}(MimeType||(MimeType={}));const{jsonScript:prefix}=Selector,{stringify:stringify}=JSON;var getExportText=({text:e,name:t})=>{const n=stringify({name:t,text:e});return`(() => {\n        const { stringify } = JSON;\n        const selector = '${prefix}[data-name="${t}"]';\n        const existingScript = document.querySelector(selector);\n        const script = !existingScript && document.createElement('script');\n\n        if (script) {\n            script.type = 'application/json';\n            script.dataset.name = '${t}';\n            script.innerHTML = stringify(${n});\n\n            document.head.appendChild(script);\n        }\n    })()`.trim()};const{cwd:getWorkingDirectory}=process,args=new Args,{period:period,backTick:backTick}=StringConstant,relativeFilePath=args.get(CommandlineArgument.file)||args.get(CommandlineArgumentShort.file),argumentFile=relativeFilePath&&path.resolve(getWorkingDirectory(),relativeFilePath);function main({file:e}){return __awaiter(this,void 0,void 0,function*(){const t=path.dirname(e),n=path.basename(e),i=[n,Extension.json,Extension.js].join(period),r=[n,Extension.json].join(period),o=path.resolve(t,i),a=yield getFileText(e),c=getExportText({name:r,text:a});createFile(o,c)})}argumentFile&&main({file:argumentFile}),module.exports=main;
//# sourceMappingURL=index.js.map
